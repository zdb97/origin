function resizeMap(){var t,e=$("#nearbyStores");return 0===e.length?!1:(t=$(window).height()-(e.offset().top+parseInt(e.css("margin-bottom"),10)+parseInt(e.css("border-top-width"),10)+parseInt(e.css("border-bottom-width"),10)),e.height(t),void 0)}function calculateDistanceBetween(t,e){var i=6378100,n=(t.latitude-e.latitude).toRad(),o=(t.longitude-e.longitude).toRad(),a=Math.sin(n/2)*Math.sin(n/2)+Math.cos(t.latitude.toRad())*Math.cos(e.latitude.toRad())*Math.sin(o/2)*Math.sin(o/2),s=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));return i*s}function renderStore(t,e){var i=$(".fn-googlePlacesWithGeocoder").data("places"),n=$(".storeSearchResults"),o=n.find(".storeList"),a=calculateDistanceBetween(i.searchCentre,e),s=[];s.push('<div class="storeList-item">'),s.push('<div class="storeList-proximity">'+Math.round(a)+"m</div>"),s.push('<h2 class="storeList-heading">'+e.title+"</h2>"),e.data.address&&(s.push('<div class="storeList-address">'+e.data.address+"</div>"),s.push('<div class="storeList-getDirections">'),s.push('<a href="https://maps.google.com/maps?'+$.param({daddr:e.data.address})+'" target="_blank" class="eventtracker_trackStoreDetailsLink">(Get directions)</a>'),s.push("</div>")),e.data.phone&&(s.push('<div class="storeList-phone">'),e.data.internationalPhone?s.push('<a href="tel:'+e.data.internationalPhone+'">'+e.data.phone+"</a>"):s.push(e.data.phone),s.push("</div>")),e.data.todaysOpeningHours&&(s.push('<div class="storeList-openingHours">'),s.push("Open today: "+e.data.todaysOpeningHours.open),s.push(" to "+e.data.todaysOpeningHours.close),s.push("</div>")),s.push("</div>"),$(s.join("")).appendTo(o),n.removeClass("is-hidden")}

/*
$.SwipePlans=function(){this.config={$activePlansContainer:$(".planMasterContainer .planListContainer.is-active"),$planContainer:$(".planSwipe"),$planIndicatorContainer:$("nav ul.planIndicator"),planIndicatorItem:"nav ul.planIndicator li",width:40,gap:30,activePlansContainer:".planListContainer.is-active .planList >ul >li"}},

$.SwipePlans.prototype={init:function(){},showPlanSwipe:function(){var t=this;this.config.$planIndicatorContainer.html(""),$.each($(this.config.$planContainer,this.config.$activePlansContainer),function(){$(this).is(":visible")&&(t.buildPlanIndicator($("> ul > li",$(this)).length),window.planSwipe=new Swipe($(this).get(0),{callback:function(e){$.each($(t.config.planIndicatorItem),function(){$(this).attr("class","")}),$(t.config.planIndicatorItem).eq(e).attr("class","on")}}),t.customizePlanSwiper())})},buildPlanIndicator:function(t){for(var e=0;t>e;e++)0===e?this.config.$planIndicatorContainer.append('<li itemIndex="'+e+'" class="on">'):this.config.$planIndicatorContainer.append('<li itemIndex="'+e+'">');$(this.config.planIndicatorItem).on("hover",function(){window.planSwipe.slide($(this).attr("itemIndex"),300)})},customizePlanSwiper:function(){var t=this,e=$(t.config.activePlansContainer).first().outerWidth()-t.config.width,i=$(t.config.activePlansContainer).first().outerWidth()-t.config.gap;$.each($(t.config.activePlansContainer),function(t){$(this).css("width",e+"px"),$(this).css("left",-1*t*i+"px")})}},
*/




$.fn.accordion=function(){return this.each(function(){$(this).data("accordion",new $.Accordion($(this)))})},

$.Accordion=function(t){this.$trigger=t,this.$container=$(this.$trigger.attr(this.ELEMENT)),this.open=this.$trigger.attr(this.OPEN_BY_DEFAULT),this.init()},

$.Accordion.prototype={ELEMENT:"data-element",OPEN_BY_DEFAULT:"data-openByDefault",OPEN:"is-open",bindTrigger:function(){var t=this;t.$trigger.click(function(){return t.$trigger.blur(),t.open?t.closeContainer():t.openContainer(),!1})},closeContainer:function(){this.$container.hide(),this.$trigger.removeClass(this.OPEN),this.open=!1},openContainer:function(){this.$container.show(),this.$trigger.addClass(this.OPEN),this.open=!0},init:function(){this.open?this.openContainer():this.closeContainer(),this.bindTrigger()}},

$(window).on("load",function(){var t,e=$(".nearbyStoresForm"),i=document.getElementById("fsSearchTerm"),n={types:["(cities)"],componentRestrictions:{country:"au"}};i&&(t=new google.maps.places.Autocomplete(i,n),google.maps.event.addListener(t,"place_changed",function(){e.trigger("submit")}))});

var ClearInputButton=function(t,e){this.button=t,this.input=e};

ClearInputButton.prototype.init=function(){this.button.on("click",$.proxy(function(){this.input.val(""),this.input.trigger("change"),this.input.trigger("focus")},this)),this.input.on("focus keyup change",$.proxy(function(){""!==this.input.val()?this.button.addClass("is-enabled"):this.button.removeClass("is-enabled")},this))},

$('[data-behaviour="clearInputButton"]').each(function(t,e){var i=$(e),n=$(i.attr("data-input")),o=new ClearInputButton(i,n);o.init()});

var dialogModal=function(t,e,i,n,o,a,s,r){this.cookieName=t,this.cookieExpiry=e,this.dialogName=i,this.dialogHeaadingText=n,this.dialogContentText=o,this.dialogHeight=a,this.dialogWidth=s,this.loginIdentifier=r};

dialogModal.prototype={init:function(){this.checkLogin()},checkLogin:function(){this.loginIdentifier.length>0&&this.buildDialogModalBox()},buildDialogModalBox:function(){$.cookie(this.cookieName)||($.cookie(this.cookieName,!0,{expires:this.cookieExpiry}),$("body").append('<div id="'+this.loginDialog+'" title="'+this.dialogHeaadingText+'">'),$("#"+this.loginDialog).append("<p>"+this.dialogContentText+"</p>"),$("#"+this.loginDialog).dialog({dialogClass:"loginModalDialog",autoOpen:!0,closeOnEscape:!0,height:this.dialogHeight,width:this.dialogWidth,modal:!0}))}},

function(){var t="WifiOnly",e=28,i="loginDialog",n="Welcome to My Optus",o="<p>This website can be used over Wi-Fi or the Optus data network, whichever you choose.</p><p>However, as this is your first time connecting, in order for us to securely verify your service, your phone will need to temporarily connectvia the Optus network rather than over Wi-Fi.</p>",a=400,s=300,r=$("#LoginModule");new dialogModal(t,e,i,n,o,a,s,r).init()}();

var ErrDisplay=function(t,e,i,n,o){this.container1=t,this.errDiv1=e,this.errUsernameForm=i,this.errPasswordForm=n,this.errClassName=o};

ErrDisplay.prototype={init:function(){this.buildErrHtml()},buildErrHtml:function(){var t=this.container1.find(this.errDiv1),e=this.container1.find(this.errUsernameForm),i=this.container1.find(this.errPasswordForm);t.length>0&&(e.length>0&&(e.addClass(this.errClassName),e.on("focus",{obj:e,errClass:this.errClassName},this.removeErrHighlight)),i.length>0&&(i.addClass(this.errClassName),i.on("focus",{obj:i,errClass:this.errClassName},this.removeErrHighlight)))},removeErrHighlight:function(t){$(t.data.obj).removeClass(t.data.errClass)}},

function(){var t=$("form#myAccountLogIn"),e=$("div.error"),i=$("input#userName"),n=$("input#password"),o="errForm";new ErrDisplay(t,e,i,n,o).init()}();

var KampyleLinkInterceptor=function(t){this.$link=t};KampyleLinkInterceptor.prototype={init:function(){this.bindEvents()},bindEvents:function(){this.$link.on("click",$.proxy(this.onClick,this))},onClick:function(t){t.preventDefault(),k_config.actionOpenFFButton()}},

$('a[href="https://www.optus.com.au/shop/Mobile-Site/kampyle/feedback/"]').each(function(){var t=$(this);new KampyleLinkInterceptor(t).init()}),

$.GoogleMap=function(t,e){this.$container=t,this.settings=$.extend({},this.__defaults,e),this.api=this.settings.api||(window.google?window.google.maps:!1),this.api||this.displayError()},

$.GoogleMap.prototype={ERROR_MESSAGE:"The Google Maps library failed to load. This could be a problem with your internet connection, or the website itself.",MAP_URL:"data-map-url",MARKER_ADDED:"googleMapsMarkerAdded",MAXIMUM_Z_INDEX:200,__defaults:{infoWindowClass:"mapWindow",myLocationIcon:!1,showCurrentLocation:!1,showInfoWindow:!1},addCurrentLocation:function(){var t=this;window.navigator.geolocation&&window.navigator.geolocation.getCurrentPosition(function(e){var i=new t.api.LatLng(e.coords.latitude,e.coords.longitude),n={map:t.map,position:i,title:"You are here.",zIndex:t.MAXIMUM_Z_INDEX};t.settings.myLocationIcon&&(n.icon=t.settings.myLocationIcon),new t.api.Marker(n)},function(){})},addMarkers:function(t){var e=this;if(t.length){var i=new e.api.InfoWindow({zIndex:210});$.each(t,function(t,n){n&&e.addMarker(t,n,i)})}e.settings.showCurrentLocation&&e.addCurrentLocation()},addMarker:function(t,e,i){var n=this,o=new n.api.LatLng(e.latitude,e.longitude),a={map:n.map,position:o,title:e.title,zIndex:n.MAXIMUM_Z_INDEX-t};void 0!==e.icon&&(a.icon=e.icon);var s=new n.api.Marker(a);n.settings.showInfoWindow&&n.bindEvents(e,s,i),$(document).trigger(n.MARKER_ADDED,[e])},basicSummary:function(t){var e=[];e.push('<h5 class="mapWindow-heading">'+t.title+"</h5>"),t.data.address&&(e.push('<p class="mapWindow-address">'+t.data.address+"</p>"),e.push('<div class="mapWindow-getDirections">'),e.push('<a href="https://maps.google.com/maps?'+$.param({daddr:t.data.address})+'" target="_blank">(Get directions)</a>'),e.push("</div>")),t.data.phone&&(e.push('<p class="mapWindow-phone">'),t.data.internationalPhone?e.push('<a href="tel:'+t.data.internationalPhone+'">'+t.data.phone+"</a>"):e.push(t.data.phone),e.push("</p>")),t.data.todaysOpeningHours&&(e.push('<div class="mapWindow-openingHours">'),e.push("Open today: "+t.data.todaysOpeningHours.open),e.push(" to "+t.data.todaysOpeningHours.close),e.push("</div>"));var i=e.join("");return i},bindEvents:function(t,e,i){var n=this;n.api.event.addListener(e,"click",function(){i.setContent(n.pointSummary(t)),i.open(n.map,e)})},createMap:function(){this.map=new this.api.Map(document.getElementById(this.$container.attr("id")),{mapTypeId:this.api.MapTypeId.ROADMAP,mapTypeControl:!1,navigationControlOptions:{style:this.api.NavigationControlStyle.SMALL}})},display:function(){this.getData()},displayError:function(){this.$container.text(this.ERROR_MESSAGE)},getData:function(){$.getJSON(this.$container.attr(this.MAP_URL),$.proxy(this.populateAndPosition,this))},populateAndPosition:function(t){null!==t&&(this.createMap(),this.addMarkers(t.places),this.map.setCenter(new this.api.LatLng(t.latitude,t.longitude)),this.map.setZoom(t.zoom))},pointSummary:function(t){var e=this.basicSummary(t),i=this.settings.infoWindowClass;$("."+i).remove();var n=i+Math.floor(1e4*Math.random()),o=$("<div>"+e+"</div>").attr("id",n).addClass(i).appendTo("body");return document.getElementById(o.attr("id"))}},

$.fn.googleMap=function(t){return this.each(function(){$(this).data("map",new $.GoogleMap($(this),t))})};

var OverlayOpener=function(t,e){this.$el=t,this.$overlay=e};

OverlayOpener.prototype={visibleClass:"is-visible",init:function(){this.$shadow=this.getShadow(),this.bindEvents()},getShadow:function(){var t=$(".overlayShadow");return t.length||(t=$('<div class="overlayShadow"></div>').appendTo("body")),t},bindEvents:function(){this.$el.on("click",$.proxy(this.showOverlay,this)),this.$shadow.on("click",$.proxy(this.hideOverlay,this))},showOverlay:function(){this.$overlay.addClass(this.visibleClass),this.$shadow.addClass(this.visibleClass)},hideOverlay:function(){this.$overlay.removeClass(this.visibleClass),this.$shadow.removeClass(this.visibleClass)}},

$('[data-behaviour="openOverlay"]').each(function(){var t=$(this),e=$(t.attr("data-overlay"));new OverlayOpener(t,e).init()}),

$.GooglePlaces=function(t,e){$.GoogleMap.apply(this,arguments),this.geolocation=this.settings.geolocation||(window.navigator?window.navigator.geolocation:!1)},

$.extend($.GooglePlaces.prototype,$.GoogleMap.prototype),

$.GooglePlaces.prototype.QUERY="data-places-query",$.GooglePlaces.prototype.RADIUS="data-places-radius",$.GooglePlaces.prototype.TYPES="data-places-types",$.GooglePlaces.prototype.buildCriteria=function(t,e){var i=this.$container.attr(this.QUERY)||"",n=this.$container.attr(this.TYPES)||"",o={location:new this.api.LatLng(t,e),rankBy:this.api.places.RankBy.DISTANCE};return i&&(o.name=i),n&&(o.types=n.split(",")),o},$.GooglePlaces.prototype.convertData=function(t,e){var i,n=[];$.isArray(e)||(e=[i]);for(var o=0;e.length>o;o++){i=e[o];var a={title:i.name,latitude:i.geometry.location.lat(),longitude:i.geometry.location.lng(),data:{address:i.vicinity+", "+this.getState(i),open:i.opening_hours&&i.opening_hours.open_now,todaysOpeningHours:this.getTodaysOpeningHours(i),reference:i.reference,phone:i.formatted_phone_number,internationalPhone:i.international_phone_number?i.international_phone_number.split(" ").join(""):null}};n.push(a)}return n},$.GooglePlaces.prototype.getTodaysOpeningHours=function(t){var e,i={};return t.opening_hours&&t.opening_hours.periods&&(e=this.getPlacesOpeningHoursForToday(t.opening_hours.periods),e&&e.open&&e.open.time&&e.close&&e.close.time)?(i.open=this.convertTimeToReadableFormat(e.open.time),i.close=this.convertTimeToReadableFormat(e.close.time),i):!1},$.GooglePlaces.prototype.getPlacesOpeningHoursForToday=function(t){var e,i=(new Date).getDay();return $.each(t,function(t,n){n.open.day===i&&(e=n)}),e},$.GooglePlaces.prototype.convertTimeToReadableFormat=function(t){var e=parseInt(t.substring(0,2),10),i=t.substring(2,4),n="am";return e>=12&&(n="pm",e>12&&(e-=12)),e+":"+i+n},$.GooglePlaces.prototype.getState=function(t){var e="";return $.each(t.address_components||[],function(t,i){$.each(i.types||[],function(t,n){"administrative_area_level_1"===n&&(e=i.short_name)})}),e},$.GooglePlaces.prototype.createMap=function(t){this.map=new this.api.Map(document.getElementById(this.$container.attr("id")),{mapTypeId:this.api.MapTypeId.ROADMAP,center:t.location,zoom:this.getZoom(5e4)}),this.performSearch(t)},$.GooglePlaces.prototype.getCriteria=function(){var t=this;t.geolocation&&t.geolocation.getCurrentPosition(function(e){var i=t.buildCriteria(e.coords.latitude,e.coords.longitude);t.createMap(i)},function(){})},$.GooglePlaces.prototype.getData=function(){this.getCriteria()},$.GooglePlaces.prototype.getZoom=function(t){return 200>=t?17:500>=t?16:1e3>=t?15:13},$.GooglePlaces.prototype.performSearch=function(t){var e=this,i=new e.api.places.PlacesService(e.map);i.nearbySearch(t,function(n,o){if(o===e.api.places.PlacesServiceStatus.OK){var a=e.convertData(t,n),s=[],r=a.length-1,l=0;e.map.setCenter(new e.api.LatLng(a[0].latitude,a[0].longitude)),$.each(a,function(t,n){var o={reference:n.data.reference};i.getDetails(o,function(i,n){n===google.maps.places.PlacesServiceStatus.OK&&(s[t]=e.convertData(o,[i])[0]),l===r&&(e.addMarkers(s),e.$container.trigger("placeDetailsResultsReturned")),l+=1})})}else $(document).trigger("searchError.storeLocator"),alert("There are no Yes Optus Stores in the area you have searched. Whilst we are working on improving the functionality of this site, please try searching another suburb or postcode nearby.")})},$.fn.googlePlaces=function(t){return this.each(function(){$(this).data("places",new $.GooglePlaces($(this),t))})},$.GooglePlacesWithGeocoder=function(t,e){$.GooglePlaces.apply(this,arguments)},$.extend($.GooglePlacesWithGeocoder.prototype,$.GooglePlaces.prototype),$.GooglePlacesWithGeocoder.prototype.INPUT="data-places-input",$.GooglePlacesWithGeocoder.prototype.__defaults.country="",$.GooglePlacesWithGeocoder.prototype.getCriteria=function(){var t=this,e=$(t.$container.attr(t.INPUT)),i=e.length&&e.val();if(0===i)return alert("Unable to find a search criteria."),void 0;if("current location"===$.trim(i).toLowerCase())if(t.geolocation)t.geolocation.getCurrentPosition(function(e){t.searchCentre={latitude:e.coords.latitude,longitude:e.coords.longitude};var i=t.buildCriteria(e.coords.latitude,e.coords.longitude);t.createMap(i)},function(t){$(document).trigger("searchError.storeLocator");var e="We couldn’t determine your location. Please manually enter the location you would like to search.";t.code===t.PERMISSION_DENIED&&(e="We can’t determine your location because location sharing isn’t enabled. Please enable location sharing in your phone’s settings, refresh this page, and try again."),alert(e)},{timeout:1e4});else{$(document).trigger("searchError.storeLocator");var n="We couldn’t determine your location. Please manually enter the location you would like to search.";alert(n)}else{var o={address:i,region:t.settings.country},a=new t.api.Geocoder;a.geocode(o,function(e,i){if(i===t.api.GeocoderStatus.OK&&e.length>0){var n=e[0].geometry.location;t.searchCentre={latitude:n.lat(),longitude:n.lng()};var o=t.buildCriteria(n.lat(),n.lng());t.createMap(o)}else{$(document).trigger("searchError.storeLocator");var a="We couldn’t determine your location. Please try searching for another location.";alert(a)}})}},$.fn.googlePlacesWithGeocoder=function(t){return this.each(function(){$(this).data("places",new $.GooglePlacesWithGeocoder($(this),t))})};var ImagePostLoader=function(t){this.img=$(t)};ImagePostLoader.prototype.load=function(){var t=this.img.attr("data-src");t&&this.img.attr("src",t)},$(window).on("load",function(){$(".postload_img").each(function(){new ImagePostLoader(this).load()})}),$.fn.initTabSet=function(){return this.each(function(){var t=new $.TabSet($(this));t.init()})},$.PlanList=function(){this.config={$plansContainer:$(".planMasterContainer"),$PlanCalc:$(".expander.usage-calc"),$PlanInfo:$(".expander.important-info"),$activePlansContainer:$(".planMasterContainer .planListContainer.is-active")}},$.TabSet=function(t){this.$container=t,this.$list=$(".tabs-list",this.$container),this.$content=$(".tabs-content",this.$container),this.tabLength=$("li",this.$list).length},$.TabSet.prototype={isActive:"is-selected",isActiveClass:".is-selected",init:function(){this.$list.on("click",{obj:this.$list,tabLength:this.tabLength},$.proxy(function(t){var e=$(t.target);t.preventDefault(),e.isLink()&&(this.deactivateActiveTab(),this.activateTab(e),this.getPlanTabContent(t.data.obj,t.data.tabLength,e))},this))},deactivateActiveTab:function(){var t=this.getActiveTab();t.removeClass(this.isActive)},getActiveTab:function(){return $(this.isActiveClass,this.$list).add(this.$content.filter(this.isActiveClass))},activateTab:function(t){var e=this.getIdFromTarget(t);t=t.add(this.$content.filter(e)),t.addClass(this.isActive)},getIdFromTarget:function(t){return t.attr("href")},getPlanTabContent:function(t,e,i){var n=new $.PlanList;n.config.$plansContainer.length&&n.config.$PlanCalc.length&&n.config.$PlanInfo&&(e-1===$("li",t).index(i.parent())?(n.config.$plansContainer.show(),n.config.$PlanCalc.show(),n.config.$PlanInfo.show(),(new SwipePlans).init()):(n.config.$plansContainer.hide(),n.config.$PlanCalc.hide(),n.config.$PlanInfo.hide()))}},$.fn.isLink=function(){return this.is("a")};var ItemToggler=function(t,e,i,n){this.$link=t,this.$otherLinks=e,this.$elementsToShow=i,this.$elementsToHide=n};ItemToggler.prototype={init:function(){this.$link.on("click",$.proxy(this.handleClick,this))},handleClick:function(t){t.preventDefault(),this.$otherLinks.removeClass(this.activeClass),this.$link.addClass(this.activeClass),this.showAndHideElements()},showAndHideElements:function(){this.hideElements(),this.showElements()},hideElements:function(){this.$elementsToHide.removeClass(this.activeClass)},showElements:function(){this.$elementsToShow.addClass(this.activeClass)},activeClass:"is-active"},function(){var t=$('[data-behaviour="colourSelector"]');t.each(function(e,i){var n=$(i),o=n.attr("data-colour"),a=$(".planList-cta[data-colour!="+o+"]"),s=$(".planList-cta[data-colour="+o+"]");new ItemToggler(n,t,s,a).init()})}();var PlanListFilter=function(t,e){this.key=t,this.value=e};PlanListFilter.fromEvent=function(t){var e,i,n=$(t.target);return $.each(PlanListFilter.filterKeys,function(t,o){var a="data-"+o+"Filter";n.is("["+a+"]")&&(e=o,i=n.attr(a))}),new PlanListFilter(e,i)},PlanListFilter.filterKeys=["plan","colour","model"];

var PlanListToggler=function(){this.$planFilterLinks=$("[data-planFilter]"),this.$colourFilterLinks=$("[data-colourFilter]"),this.$modelFilterLinks=$("[data-modelFilter]"),this.$filterLinks=$('[data-behaviour="planAndModelFilter"]'),this.$planLists=$('[data-behaviour="planAndModelList"]'),this.filters={}};

PlanListToggler.prototype={
	init:function(){this.initColourBlock(),this.initFilters(),this.updateView(),this.$filterLinks.on("click",$.proxy(function(t){var e=PlanListFilter.fromEvent(t);t.preventDefault(),this.updateFilters(e),this.updateView()},this))},
	
	initFilters:function(){var t=this.$planFilterLinks.filter("."+this.activeClass).attr("data-planFilter"),e=this.$colourFilterLinks.filter("."+this.activeClass).attr("data-colourFilter"),i=this.$modelFilterLinks.filter("."+this.activeClass).attr("data-modelFilter");t&&(this.filters.plan=t),e&&(this.filters.colour=e),i&&(this.filters.model=i)},
	
	initColourBlock:function(){var t=$.makeArray($("a."+this.modelSelectionLink).filter(this.$colourFilterLinks));$.each(t,function(){var t=$(this).attr("data-colourFilter");$("span",this).css({"background-color":t})})},
	
	updateFilters:function(t){this.filters[t.key]=t.value},
	
	updateView:function(){var t=this.getActiveFilterLinks(),e=this.getActivePlanList();this.$filterLinks.removeClass(this.activeClass),t.addClass(this.activeClass),this.$planLists.removeClass(this.activeClass),e.addClass(this.activeClass),(new SwipePlans).init()},
	
	getActiveFilterLinks:function(){var t=$();return $.each(this.filters,$.proxy(function(e,i){var n="[data-"+e+'Filter="'+i+'"]';t=t.add(this.$filterLinks.filter(n))},this)),t},
	
	getActivePlanList:function(){var t=[];return $.each(this.filters,function(e,i){t.push("[data-"+e+'Filter="'+i+'"]')}),this.$planLists.filter(t.join(""))},
	
	activeClass:"is-active",modelSelectionLink:"modelSelection-link"},

(new PlanListToggler).init(),$(document).bind("ready ajaxContentLoaded",function(t){var e=$(t.target),i=$("#fsSearchTerm");e.find(".fn-accordion").accordion(),e.find(".tabs").initTabSet();var n=e.find(".fn-googlePlacesWithGeocoder").googlePlacesWithGeocoder({country:"AU",showInfoWindow:!0});e.find(".nearbyStoresForm").submit(function(){var t=i.length&&i.val(),e=t&&$.trim(t);return i.trigger("blur"),$(window).trigger("storeLocator_search",[t]),e?($(document).trigger("search.storeLocator",[t]),$(".storeSearchResults .storeList").html(""),n.data("places").display(),n.show(),!1):(alert("Please enter a suburb or postcode."),i.focus(),!1)}),i.length&&$("#footer").remove(),i.on("keyup focus change",function(){var t="is-currentLocation";"current location"===i.val().toLowerCase()?i.addClass(t):i.removeClass(t)}),i.on("focus",function(){$(".storeLocatorSearch").addClass("is-expandingSearchField")}),i.on("blur",function(){$(".storeLocatorSearch").removeClass("is-expandingSearchField")}),e.find('[data-behaviour="searchCurrentLocation"]').on("click",function(t){t.preventDefault(),i.val("Current Location"),i.trigger("change"),$(".nearbyStoresForm").submit()}),n.on("placeDetailsResultsReturned",function(){$(document).trigger("resultsReturned.storeLocator")}),e.find('[data-behaviour="storeLocatorViewToggle"]').on("click",function(t){var e,i,n=$(this),o=n.find("a"),a="is-active",s=$(t.target),r=$(".storeLocatorView"),l="is-visible",c=$(".fn-googlePlacesWithGeocoder").data("places");t.preventDefault(),s.is("a")&&(e=s.attr("href"),i=c.map.getCenter(),o.not(s).removeClass(a),r.not(e).removeClass(l),s.addClass(a),$(e).addClass(l),resizeMap(),c.api.event.trigger(c.map,"resize"),c.map.setCenter(i))}),$(window).on("resize",function(){resizeMap()}),function(){var t=e.find('[data-behaviour="loadPage"]').attr("data-url");t&&$.ajax({url:t,dataType:"html",complete:function(){window.location.href=t}})}(),function(){e.find('[data-behaviour="hideOnMobile"]').hide(),e.find('[data-behaviour="showOnMobile"]').show()}(),function(){var t=e.find('[data-behaviour="showItemAndHideOthers"]'),i="is-active";t.on("click",function(e){e.preventDefault();var n=$(this),o=n.add(n.attr("href")),a=t.not(n).add(n.attr("data-itemsToHide")).not(o);n.addClass(i),o.addClass(i),a.removeClass(i)})}()}),

function(){var t=function(){this.currentTime=(new Date).getTime(),this.timeDifference=this.getTimeDifference()};window.NotAuthorisedRedirector=t,t.prototype={mostRecentRedirect:"NOT_AUTHORISED_MOST_RECENT_REDIRECT",redirectCount:"NOT_AUTHORISED_REDIRECT_COUNT",timeLimit:6e4,getTimeDifference:function(){var t=$.cookie(this.mostRecentRedirect)||this.currentTime-this.timeLimit;return this.currentTime-t},init:function(){this.isErrorPage()&&(this.recalibrateRedirectCount(),this.hasRedirectedTooManyTimesRecently()||(this.updateRedirectTracking(),this.redirect()))},isErrorPage:function(){return $("#checkUsageNotAuthorisedIndicator").length},recalibrateRedirectCount:function(){this.timeDifferenceWithinLimit()||this.setRedirectCount(0)},timeDifferenceWithinLimit:function(){return this.timeDifference<this.timeLimit},setRedirectCount:function(t){$.cookie(this.redirectCount,t,{path:"/"})},hasRedirectedTooManyTimesRecently:function(){var t=this.getRedirectCount(),e=3;return this.timeDifferenceWithinLimit()&&t>=e?!0:!1},getRedirectCount:function(){return parseInt($.cookie(this.redirectCount),10)||0},updateRedirectTracking:function(){var t=this.getRedirectCount();this.setRedirectCount(t+1),$.cookie(this.mostRecentRedirect,(new Date).getTime(),{path:"/"})},redirect:function(){window.location.href="/shop/Mobile-Site/Check-Usage/"}},(new t).init()}(),$(document).on("search.storeLocator",function(){$("#storeLocatorLoadingMsg").addClass("is-visible"),$("#storeLocatorResultsContainer").removeClass("is-visible")}),$(document).on("searchError.storeLocator",function(){$("#storeLocatorLoadingMsg").removeClass("is-visible")}),$(document).on("resultsReturned.storeLocator",function(){var t=$(".fn-googlePlacesWithGeocoder").data("places"),e=t.map.getCenter();$("#storeLocatorLoadingMsg").removeClass("is-visible"),$("#storeLocatorResultsContainer").addClass("is-visible"),resizeMap(),t.api.event.trigger(t.map,"resize"),t.map.setCenter(e)}),$(window).bind("ready resize",function(){$(".iframe").attr("height",function(){return window.innerHeight-($("#header").height()+$("#footer").height())}())}),$(document).bind($.GoogleMap.prototype.MARKER_ADDED,renderStore),Number.prototype.toRad===void 0&&(Number.prototype.toRad=function(){return this*Math.PI/180});